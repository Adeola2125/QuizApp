<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MANAGE QUIZ</title>
    <link rel="stylesheet" href="./manageQuiz.css">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body style="background-color: #001a2f;">
    <div class="container-fluid">
        <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand pl-5" href="#">MY QUIZ</a>
            
            <!-- <p class=" text-primary">DASHBOARD</p> -->
            <!-- <a href="#" class="btn btn-primary ml-auto mr-5"><i class="fa fa-plus-circle" aria-hidden="true"></i> Create New Quiz</a> -->
            <li class="row nav-item dropdown d-none d-md-block ml-auto">
              
                <img style="width: 50px; height: 50px; border-radius: 100%;" src="./Quiz logo.jpg" alt="">
                <a class="nav-link1 dropdown-toggle text-dark pt-3 pl-3" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-expanded="false"></a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="#">Action</a>
                  <a class="dropdown-item" href="#">Another action</a>
                  <a class="dropdown-item" href="#">Something else here</a>
                </div>
                <span class="pt-3 pl-2" style="font-size: 15px;">ADMIN</span>
              </li>
          </nav>
          <div class="row pt-5">
            <div class="col-md-2 pt-5" style="border-right: 1px solid white;background-color: #001a2f;">
              <div class="pt-3 text-white">
                <div class="col-sm-12" style="padding-left: 70px;">
                    <img style="width: 50px; height: 50px; border-radius: 100%;" src="./Quiz logo.jpg" alt="">
                </div>
                <div class="col-sm-12 mt-2 text-center">
                    <h5 id="adminName"></h5>
                    <p class="">Web Developer</p>
                </div>
              </div>
            </div>
            <div class="col-md-10 pt-5 text-white" style="background-color: #001a2f;">
              <h5><i class="fa fa-tasks mr-2" aria-hidden="true"></i> MANAGE QUIZ MODULE</h5>
              <div class="row mt-3">
                  <div class="col-md-8">
                    <h4 id="username"></h4>
                    <p>All systems are running smoothly!</p>
                  </div>
                
                  <div class="col-md-4">
                    <p id="cloock"><i class="fa fa-home mr-1" aria-hidden="true"></i>Dashboard  <i class="fa fa-angle-right" style="font-size: small;" aria-hidden="true"></i>  Manage Quiz</p>
                </div>
              </div>
            </div>
          </div>
          <div class="row" style="height: 100vh;">
              <!-- <div class="col-md-2 bg-light text-dark" adeola-include-html="quizsidebar.html"></div> -->
              <div class="col-md-2 bg-light text-dark">
                <h6 style="background-color: #ffffff; font-size: small;" class="text-center text-muted mt-5"><span style="border-radius: 15%;">MODULE</span></h6>
              <ul class="navbar-nav pt-3 text-dark" style="font-size: 14px;">
                  <li class="nav-item">
                      <a class="nav-link" href="./dashboard2.html"><i class="fa fa-home mr-2" aria-hidden="true"></i>DASHBOARD</a>
                    </li>
                  <li class="nav-item">
                    <a class="nav-link" href="./categoryModule.html"><i class="fa fa-bars" aria-hidden="true"></i> MANAGE CATEGORY <span class="sr-only">(current)</span></a>
                  </li>
                  <li class="nav-item active">
                    <a class="nav-link" href="./manageQuiz.html"><i class="fa fa-tasks mr-2" aria-hidden="true"></i> MANAGE QUIZ</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#"><i class="fa fa-star mr-2" aria-hidden="true"></i> ACTIVATE QUIZ</a>
                  </li>
                </ul>
                <hr style="background-color: #001a2f;">
            </div>
              <div class="col-md-10 pb-4 text-white" style="background-color: #001a2f;">
                  <div class="row text-white">
                    <div class="col-sm-4">
                        <div class="card card1">
                          <div class="card-body">
                            <h5 class="card-title number" id="quizCount">0</h5>
                            <p class="card-text text-white">Total No.of Quiz.</p>
                            <!-- <a href="#" class="btn btn-white">Go somewhere</a> -->
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-4">
                        <div class="card card1">
                          <div class="card-body">
                            <h5 class="card-title number" id="active">0</h5>
                            <p class="card-text text-white">Total No.of Active Quiz.</p>
                            <!-- <a href="#" class="btn btn-white">Go somewhere</a> -->
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-4">
                          <div class="card card1">
                            <div class="card-body">
                              <h5 class="card-title number" id="inactive">0</h5>
                              <p class="card-text text-white">Total No.of Inactive Quiz.</p>
                              <!-- <a href="#" class="btn btn-white">Go somewhere</a> -->
                            </div>
                          </div>
                        </div>
                  </div>
                  <div class="col-sm-12 mt-5 pb-5 text-white caterogiesactivites">
                    <h4 class="ml-3">Manage Quiz</h4>
                    <div class="row mb-4 pt-3">
                      <div class="row">
                        <div class="input-group mb-3 mt-3 col-6">
                          <div class="input-group-prepend">
                            <span class="input-group-text text-white" id="" style="background-color: #191c24;">Category</span>
                          </div>
                          <select class="bog-dark text-white custom-select" name="" onchange="RefetchQuiz()" id="selectFilterDropdown" style="padding-top: 2px;padding-bottom: 2px;background-color: #001a2f;">
                            <!-- <option value="">select category</option> -->
                          </select>
                        </div>
                        <div class="input-group mb-3 mt-3 col-6">
                          <div class="input-group-prepend">
                            <span class="input-group-text text-white" id="basic-addon1" style="background-color: #191c24;">Filter</span>
                          </div>
                          <input type="text" class="form-control" id="filterSearch" onkeyup="RefetchQuiz()" aria-label="Username" aria-describedby="basic-addon1" style="background-color: #001a2f;">
                        </div>
                        
                      </div> 

                      <button class="btn btn-primary mt-2 mr-5 ml-auto" type="button" data-toggle="modal" data-target="#ManageQuizModal" id="modal">
                        <i class="fa fa-plus-circle mr-1" aria-hidden="true"></i>
                        Create Quiz
                      </button>
            
                      <!-- The Modal -->
                  <div class="modal fade modal animate__animated animate__pulse" id="ManageQuizModal">
                      <div class="modal-dialog modal-xl" >
                      <div class="modal-content container-fluid ManageQuizModal" style="background-color: #191c24;">
                      
                          <!-- Modal Header -->
                          <div class="modal-header">
                          <h4 class="modal-title text-white">MANAGE <i class="fab fa-quora" aria-hidden="true"></i>UIZ<i class="fa fa-tasks ml-2" aria-hidden="true"></i></h4>
                          <button type="button" class="close" data-dismiss="modal">×</button>
                          </div>
                          
                          <!-- Modal body -->
                          <div class="modal-body">
                              <div class="row">
                                <form class="col-md-8 pt-3 pb-3 noOfQuestion">
                                  <div class="form-group">
                                    <label for="exampleFormControlInput1" class="animate__animated animate__zoomInUp text-white style="font-size: 28px;">
                                      No Of Questions to set 
                                      <i class="fas fa-arrow-circle-down" aria-hidden="true"></i>
                                    </label>
                                      <div class="input-group">
                                          <input type="number" class="form-control col-md-5" id="noOfQuestion">
                                      <div class="input-group-append">
                                          <button type="button" class="btn btn-primary" onclick="generateCards()">Generate</button>
                                      </div>
                                      </div>
                                  </div>
                              </form>
                              <div class="input-group col-md-4 pt-5" id="dropdownContainer" style="height: 40px;">
                                <button disabled class="input-group-prepend btn-primary">
                                  <div class="input-group-text">Category</div>
                                </button>
                                <select class="bog-dark text-white col-md-7" name="" id="selectDropdownMenu" style="padding-top: 2px;padding-bottom: 2px;background-color: #001a2f;">
                                  <!-- <option value="">select category</option> -->
                                </select>                  
                              </div>
                              </div>
                              
                              <hr>
                              <div class="row mt-3" id="displayCards">
                                  
                              </div>
                          </div>
                          
                          <!-- Modal footer -->
                          <div class="modal-footer">
                          <button type="button" class="btn btn-primary"  id="setQuiz" onclick="setQuiz()">Save Quiz</button>
                          </div>
                          
                      </div>
                      </div>
                  </div> 
                  </div>
                 <div style="overflow-x: auto;">
                  <table class="col-sm-12" border="1" cellspacing="0" style="border-color: white;" id ="">
                    <thead>
                        <tr >
                            <th>S/N</th>
                            <th>Name</th>
                            <th>Questions</th>
                            <th>Answers</th>
                            <th>Correct Answers</th>
                            <th>Action</th>
                            <!-- <th>Delete</th>
                            <th>Edit</th> -->
                        </tr>
                    </thead>
                    <tbody id="toutput">
                         <!-- The Modal -->
                      <div class="modal modal" id="myEditModal">
                          <div class="modal-dialog">
                          <div class="modal-content">
                          
                              <!-- Modal Header -->
                              <div class="modal-header">
                              <h4 class="modal-title text-dark">EDIT <i class="fab fa-quora" aria-hidden="true"></i>UIZ<i class="fa fa-tasks ml-2" aria-hidden="true"></i></h4>
                              <button type="button" class="close" data-dismiss="modal">×</button>
                              </div>
                              
                              <!-- Modal body -->
                              <div class="modal-body" style=" background-color: #191c24;">
                                <div class="card mb-3" style="border: 2px solid white;background-color: #001a2f;">
                                  <div class="card-body">
                                    <h5 class="card-title text-center" style="font-size: 27px;">Question</h5>
                                    <label>Set Question</label>
                                    <textarea type="text" class="form-control" style="border: 1px solid white;" id="setModalQuestion" cols="30" rows=""></textarea>
                                    <label>Select Options</label>
                                    <select name="" class="custom-select form-control" id="editOptionSelect" style="border: 1px solid white;">
                                        <option value=""></option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                    <form class="form-row mt-3" id="setEditModalAnswers">
                                      
                                      
                                    </form>
                                      <h6 class="pt-0">Correct Answer</h6>
                                    <fieldset class="form-row mt-2" id="correctEditModalAnswer">
                                    </fieldset>
                                  </div>
                                </div>
                              </div>
                              
                              <!-- Modal footer -->
                              <div class="modal-footer">
                              <button type="button" class="btn btn-primary"data-dismiss="modal" id="updateButton" onclick="updateButton()">Update</button>
                              </div>
                              
                          </div>
                          </div>
                      </div> 
                    </tbody>
                </table>
                 </div>
                </div>
              </div>
          </div>
    </div>
    
     <!-- jQuery library -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>

<!-- Popper JS -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function includeHTML() {
    var z, i, elmnt, file, xhttp;
    /* Loop through a collection of all HTML elements: */
    z = document.getElementsByTagName("*");
    for (i = 0; i < z.length; i++) {
      elmnt = z[i];
      /search for elements with a certain atrribute:/
      file = elmnt.getAttribute("adeola-include-html");
      if (file) {
        /* Make an HTTP request using the attribute value as the file name: */
        xhttp = new XMLHttpRequest();
       
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4) {
            if (this.status == 200) {elmnt.innerHTML = this.responseText;}
            if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
            /* Remove the attribute, and call this function once more: */
            elmnt.removeAttribute("adeola-include-html");
            includeHTML();
          }
        }
        xhttp.open("GET", file, true);
        xhttp.withCredentials = false;

        // xhttp.setRequestHeader('Access-Control-Allow-Origin', '*');
        xhttp.send();
        /* Exit the function: */
        return;
      }
    }
  }
</script>
<script>
    
  let displayCards = document.getElementById("displayCards");
  let noOfQuestion = document.getElementById("noOfQuestion");
  let options = 0;
  let OptionSelect = document.getElementById('${i}');
  let dropdownContainer = document.getElementById("dropdownContainer");
  let toutput = document.getElementById("toutput");
  let setModalQuestion = document.getElementById("setModalQuestion");
  let editOptionSelect = document.getElementById("editOptionSelect")
  let selectFilterDropdown = document.getElementById("selectFilterDropdown")
  let filterSearch = document.getElementById("filterSearch")
  let xy = ""
  let selectDropdownMenu = document.getElementById("selectDropdownMenu")
  dropdownContainer.style.display = "none"
  let seedQuizData=[
    {
        "question": "iyfvhkvgvvk",
        "id": 802961,
        "parentId": 437033441877,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "rfghjl",
                "correctAnswer": false
            },
            {
                "name": "fghjl;/",
                "correctAnswer": true
            },
            {
                "name": "yhujkl;.",
                "correctAnswer": false
            },
            {
                "name": "uioiuh",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "ygujlkjgfcv",
        "id": 650641,
        "parentId": 437033441877,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "kijvbnmkn",
                "correctAnswer": false
            },
            {
                "name": "fghbkjvm",
                "correctAnswer": false
            },
            {
                "name": ":Lm;lbk",
                "correctAnswer": true
            },
            {
                "name": "iyufhcvhj",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "jghdxhjmngn ",
        "id": 627907,
        "parentId": 437033441877,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": ",hggcbn cm",
                "correctAnswer": true
            },
            {
                "name": "gcgmfm",
                "correctAnswer": false
            },
            {
                "name": "k,m ",
                "correctAnswer": false
            },
            {
                "name": "bjhn",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "CGH,JVKVJ..",
        "id": 654916,
        "parentId": 206095776840,
        "dropdwn": "HTML",
        "opt": [
            {
                "name": "l.klhi",
                "correctAnswer": false
            },
            {
                "name": "ghjk,",
                "correctAnswer": true
            },
            {
                "name": "jjjjjbk ",
                "correctAnswer": false
            },
            {
                "name": "ouholh'o",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "iuglgiv",
        "id": 107245,
        "parentId": 206095776840,
        "dropdwn": "HTML",
        "opt": [
            {
                "name": "jjjj",
                "correctAnswer": false
            },
            {
                "name": "jvbjkj",
                "correctAnswer": false
            },
            {
                "name": "vghg",
                "correctAnswer": false
            },
            {
                "name": "bhh",
                "correctAnswer": true
            }
        ]
    },
    {
        "question": "CGH,JVKVJ..12",
        "id": 573576,
        "parentId": 538454712375,
        "dropdwn": "CSS",
        "opt": [
            {
                "name": "l.klhikljlkh",
                "correctAnswer": true
            },
            {
                "name": "ghjk,nmkkb.k",
                "correctAnswer": false
            },
            {
                "name": "jjjjjbk lkllk",
                "correctAnswer": false
            },
            {
                "name": "ouholh'ovbvvv",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "iuglgiv12",
        "id": 41533,
        "parentId": 538454712375,
        "dropdwn": "CSS",
        "opt": [
            {
                "name": "jjjjb/bk",
                "correctAnswer": false
            },
            {
                "name": "jvbjkjn b.k ",
                "correctAnswer": false
            },
            {
                "name": "vghg.. bjbh",
                "correctAnswer": true
            },
            {
                "name": "bhhijool",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "What was Meta Platforms Inc formerly known as?",
        "id": 901593,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Snapchat",
                "correctAnswer": false
            },
            {
                "name": "Facebook",
                "correctAnswer": true
            },
            {
                "name": "Airtel",
                "correctAnswer": false
            },
            {
                "name": "Stackflow",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Which English city is known as the Steel City?",
        "id": 45234,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Sheffield",
                "correctAnswer": true
            },
            {
                "name": "Shiffield",
                "correctAnswer": false
            },
            {
                "name": "Sheeffield",
                "correctAnswer": false
            },
            {
                "name": "Sheffiid",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Which former British colony was given back to China in 1997?",
        "id": 376590,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "King Kong",
                "correctAnswer": false
            },
            {
                "name": "Kong Fu",
                "correctAnswer": false
            },
            {
                "name": "Hong Hong",
                "correctAnswer": false
            },
            {
                "name": "Hong Kong",
                "correctAnswer": true
            }
        ]
    },
    {
        "question": "The logo for luxury car maker Porsche features which animal?",
        "id": 667217,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Bicycle",
                "correctAnswer": false
            },
            {
                "name": "Horse",
                "correctAnswer": true
            },
            {
                "name": "Motorcyce",
                "correctAnswer": false
            },
            {
                "name": "Hose",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Which element is said to keep bones strong?",
        "id": 569262,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Calcium",
                "correctAnswer": true
            },
            {
                "name": "Protein",
                "correctAnswer": false
            },
            {
                "name": "Carbohydrate",
                "correctAnswer": false
            },
            {
                "name": "Calcum",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Suriname is located on which continent?",
        "id": 575961,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "South Korea",
                "correctAnswer": false
            },
            {
                "name": "South Africa",
                "correctAnswer": false
            },
            {
                "name": "South America",
                "correctAnswer": true
            },
            {
                "name": "South South",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "In tennis, what piece of fruit is found at the top of the men’s Wimbledon trophy?",
        "id": 117637,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Apple",
                "correctAnswer": false
            },
            {
                "name": "Orange",
                "correctAnswer": false
            },
            {
                "name": "Pineapple",
                "correctAnswer": true
            },
            {
                "name": "Peanut",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Haematology is the study of what?",
        "id": 918375,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "The blood",
                "correctAnswer": true
            },
            {
                "name": "Human Being",
                "correctAnswer": false
            },
            {
                "name": "The School",
                "correctAnswer": false
            },
            {
                "name": "The flood",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Which body sets the interest rates in the UK?",
        "id": 623551,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Bank of England",
                "correctAnswer": true
            },
            {
                "name": "Bank of Cameroon",
                "correctAnswer": false
            },
            {
                "name": "Bank of Nigeria",
                "correctAnswer": false
            },
            {
                "name": "Bank of Africa",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "How many lives is a cat said to have?",
        "id": 997697,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Two",
                "correctAnswer": false
            },
            {
                "name": "Ten",
                "correctAnswer": false
            },
            {
                "name": "Seven",
                "correctAnswer": false
            },
            {
                "name": "Nine",
                "correctAnswer": true
            }
        ]
    },
    {
        "question": "Randall Flag, Jack Torrance and John Coffey are all characters created by which author?",
        "id": 429296,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Larry Fary",
                "correctAnswer": false
            },
            {
                "name": "Stephen Harlow",
                "correctAnswer": false
            },
            {
                "name": "Stephen King",
                "correctAnswer": true
            },
            {
                "name": "John Doe",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "In 2018, Scott Morrison was elected as the Prime Minister of which country?",
        "id": 752633,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Australia",
                "correctAnswer": true
            },
            {
                "name": "Ghana",
                "correctAnswer": false
            },
            {
                "name": "Nigeria",
                "correctAnswer": false
            },
            {
                "name": "America",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "What is a female elephant called?",
        "id": 770771,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Elephant",
                "correctAnswer": true
            },
            {
                "name": "Cow",
                "correctAnswer": false
            },
            {
                "name": "Fish",
                "correctAnswer": false
            },
            {
                "name": "Goat",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Franz Josef Strauss Airport is located in which country?",
        "id": 419157,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Germany",
                "correctAnswer": true
            },
            {
                "name": "German",
                "correctAnswer": false
            },
            {
                "name": "Africa",
                "correctAnswer": false
            },
            {
                "name": "Epic",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "On what date is Bastille Day celebrated in France?",
        "id": 368684,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "4th July",
                "correctAnswer": false
            },
            {
                "name": "14 June",
                "correctAnswer": false
            },
            {
                "name": "4th June",
                "correctAnswer": false
            },
            {
                "name": "14th July",
                "correctAnswer": true
            }
        ]
    },
    {
        "question": "Rojo is the Spanish word for which colour?",
        "id": 894315,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Yellow",
                "correctAnswer": false
            },
            {
                "name": "White",
                "correctAnswer": false
            },
            {
                "name": "Grey",
                "correctAnswer": false
            },
            {
                "name": "Red",
                "correctAnswer": true
            }
        ]
    },
    {
        "question": "Jacinda Ardern became the Prime Minister of which country in 2017?",
        "id": 737735,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "New Zeland",
                "correctAnswer": false
            },
            {
                "name": "New Zaland",
                "correctAnswer": false
            },
            {
                "name": "New Zealand",
                "correctAnswer": true
            },
            {
                "name": "New Zealeand",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "What is the capital of Argentina?",
        "id": 114020,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Buens Aires",
                "correctAnswer": false
            },
            {
                "name": "Benue Aires",
                "correctAnswer": false
            },
            {
                "name": "Buenos Aires",
                "correctAnswer": true
            },
            {
                "name": "Buenos Airs",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Which US agency has the motto “For the benefit of all”?",
        "id": 498253,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "NASA",
                "correctAnswer": true
            },
            {
                "name": "CASA",
                "correctAnswer": false
            },
            {
                "name": "OSOSA",
                "correctAnswer": false
            },
            {
                "name": "NATT",
                "correctAnswer": false
            }
        ]
    },
    {
        "question": "Pyrophobia is the fear of what?",
        "id": 840237,
        "parentId": 940909744363,
        "dropdwn": "General Knowledge",
        "opt": [
            {
                "name": "Water",
                "correctAnswer": false
            },
            {
                "name": "Fire",
                "correctAnswer": true
            },
            {
                "name": "Book",
                "correctAnswer": false
            },
            {
                "name": "Crowd",
                "correctAnswer": false
            }
        ]
    }
]
seedQuizDataFunction()
function seedQuizDataFunction(){
    let duplicateEntry=false;
    if(localStorage.getItem('myQuiz') == null) {
      localStorage.setItem('myQuiz', JSON.stringify(seedQuizData))
    } else {
      let records = JSON.parse(localStorage.getItem('myQuiz'));
      
      records.forEach(item => {
        seedQuizData.forEach(item2 => {
            if(item2.question == item.question){
                return duplicateEntry=true 
            }
        })
      })
      if(!duplicateEntry) {

          localStorage.setItem('myQuiz', JSON.stringify(records))
      }
    }
}
  // while (options < 4){
  //   options++
  //   ${i}.innerHTML += `<option value="${options}"> ${options} </option>`
  // };
  var myData = JSON.parse(localStorage.getItem("myData")) || null;
      if(myData != null) {
        selectDropdownMenu.innerHTML = ""
        selectFilterDropdown.innerHTML = "<option value=>select</option>"
        myData = myData.filter(el => el.status == "LIVE")
        for (let i = 0; i < myData.length; i++) {
          selectDropdownMenu.innerHTML +=`<option value="${myData[i].name}">${myData[i].name}</option>`
          selectFilterDropdown.innerHTML +=`<option value="${myData[i].name}">${myData[i].name}</option>` 
        }
      }
     

  function RefetchQuiz(){
      
      var myQuiz = JSON.parse(localStorage.getItem("myQuiz")) || null;
      if(myQuiz !== null){
        if(selectFilterDropdown.value){
          myQuiz = myQuiz.filter(el => el.dropdwn.toLowerCase() == selectFilterDropdown.value.toLowerCase())
          if(myQuiz == ""){
            toutput.innerHTML = `<h style="margin: 2rem;margin-top: 30px;margin-bottom: 30px;">No Records Found</h>`
            return;
          }
        }
        
        if(filterSearch.value){
          myQuiz = myQuiz.filter(el => el.dropdwn.toLowerCase().startsWith(filterSearch.value.toLowerCase()) || 
          el.question.toLowerCase().startsWith(filterSearch.value.toLowerCase()) || 
          el.parentId.toString().startsWith(filterSearch.value))
          if(myQuiz){
            filterSearch.innerHTML = ""
          }
          
        }
        
        
        quizCount = 0;
        toutput.innerHTML = ""
         for(let i = 0; i < myQuiz.length; i++){
           let optionName = myQuiz[i].opt.map((el) => {
             return el.name +' '
           }).join(",");
           let checkCorrectAnswer = myQuiz[i].opt.filter((el => {
             return el.correctAnswer === true
           })).map((el) => { 
             return el.name
            })[0];

          toutput.innerHTML +=`
              <tr>
                  <td>${i + 1}</td>
                  <td>${myQuiz[i].dropdwn}</td>
                  <td>${myQuiz[i].question}</td>
                  <td>${optionName}</td>
                  <td><span class="badge badge-primary">${checkCorrectAnswer}</span></td>
                  <td class=" d-flex">
                    <i class="fa fa-th" aria-hidden="true" style="font-size: 22px; margin: auto;></i>
                    <div class="dropdown">
                      <button class="btn dropdown-toggle text-white" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-expanded="false">
                        
                      </button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                        <button class="dropdown-item" type="button" onclick="editAction(${myQuiz[i].id})" data-toggle="modal" data-target="#myEditModal">Edit</button>
                        <button class="dropdown-item" type="button" id="trash" onclick="deleteAction(${i})">Delete</button>
                      </div>
                    </div>
                  </td>
                 
                  
              </tr>
         `
         }
        
      }
      document.getElementById("quizCount").innerHTML = myQuiz.length
  }
  RefetchQuiz()

  function generateCards(){
    dropdownContainer.style.display = ""
    if(noOfQuestion.value == ""){
      return swal({
        title: "Error Input",
        icon: "warning"
      });
    }
    if(Number(noOfQuestion.value) > 20){
      return swal({
        title: "False Input",
        icon: "warning"
      });
    }
    else{
      // console.log("running");
      displayCards.innerHTML = ""
    for(let i = 0; i < Number(noOfQuestion.value); i++){
      displayCards.innerHTML += `
      <div class="col-sm-4">
          <div class="card mb-3" style="border: 1px solid white; background-color: #001a2f;">
            <div class="card-body">
              <h5 class="card-title text-center" style="font-size: 27px;">Question ${i + 1}</h5>
              <label>Set Question</label>
              <textarea type="text" class="form-control" style="border: 1px solid white;resize: none;" id="setQuestion${i}" cols="30" rows=""></textarea>
              <label>Select Options</label>
              <select name="" class="custom-select form-control" id="myoptionselect${i}" onchange="myOptionSelect(event, ${i})" style="border: 1px solid white;">
                  <option value="">choose options</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
              </select>
              <form class="form-row mt-3" id="setAnswers${i}">
                
                
              </form>
                <h6 class="pt-0">Correct Answer</h6>
              <fieldset class="form-row mt-2" id="correctAnswer${i}">
              </fieldset>
            </div>
          </div>
        </div>
      `
    }
    }
  }

  function myOptionSelect(e,i){
    let setAnswers = document.getElementById(`setAnswers${i}`)
    let correctAnswer = document.getElementById(`correctAnswer${i}`)
    if(e.target.value == ""){
      return swal({
        title: "select value for answers"
      });
    }
    setAnswers.innerHTML = "";
    correctAnswer.innerHTML = "";
    
    for(let a = 0; a < e.target.value; a++){
      setAnswers.innerHTML += `
        <div class="input-group col-sm-6 mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text">${a + 1}</div>
          </div>
          <input type="text" style="border: 1px solid white;" class="form-control question_options" id="formInputName${a}${i}">
        </div>
      `
      correctAnswer.innerHTML +=`
          <div class="col-sm-6">
            <span class="form-check">
              <input class="form-check-input" style="border: 1px solid white;" type="radio" name="gridRadios${i}" id="gridRadios1${i}${a}" >
              <label class="form-check-label" for="gridRadios1${i}">
                Option ${a + 1}
              </label>
            </span>
          </div>
      `
     
    }
  }

  function myEditModalOptionSelect(optionArray){
    let setEditModalAnswers = document.getElementById("setEditModalAnswers")
    let correctEditModalAnswer = document.getElementById("correctEditModalAnswer")

    setEditModalAnswers.innerHTML = "";
    correctEditModalAnswer.innerHTML = "";
    let correctAnswerIndex = 0
    for(let a = 0; a < optionArray.length; a++){
      setEditModalAnswers.innerHTML += `
        <div class="input-group col-sm-6 mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text">${a + 1}</div>
          </div>
          <input value="${optionArray[a].name}" type="text" style="border: 1px solid white;" class="form-control question_options" id="formInputName${a}">
        </div>
      `
      var myQuiz = JSON.parse(localStorage.getItem("myQuiz")) || null;
      
      correctEditModalAnswer.innerHTML +=`
          <div class="col-sm-6">
            <span class="form-check">
              <input checked="${optionArray[a].correctAnswer}" value="${optionArray[a].correctAnswer}" class="form-check-input" style="border: 1px solid white;" type="radio" name="gridRadios" id="editGridRadios1${a}" >
              <label class="form-check-label" for="gridRadios1">
                Option ${a + 1}
              </label>
            </span>
          </div>
      `
      if (optionArray[a].correctAnswer){
        correctAnswerIndex = a
      }
    }
    document.getElementById(`editGridRadios1${correctAnswerIndex}`).checked = true
  }

  function setQuiz(){
    var myQuiz = JSON.parse(localStorage.getItem("myQuiz")) || null
    let setAllQuestions = [];
    let parentId = Math.floor(Math.random() * 1000000) * Math.floor(Math.random() * 1000000);
    let stat = false
    
    for (let index = 0; index < Number(noOfQuestion.value); index++) {
      let obj = {
        question: document.getElementById(`setQuestion${index}`).value,
        id: Math.floor(Math.random() * 1000000), 
        // OSN=Object Short hand Notation
        parentId,
        dropdwn: selectDropdownMenu.value,
        opt: []
      }
      let optNo = Number(document.getElementById(`myoptionselect${index}`).value)
      for(let i = 0; i < optNo; i++){
        let option = {
          name: document.getElementById(`formInputName${i}${index}`).value,
          correctAnswer: document.getElementById(`gridRadios1${index}${i}`).checked
        }
        obj.opt.push(option)
      }
      localStorage.setItem("myQuiz", JSON.stringify(obj))
    

     if(myQuiz == null){
        setAllQuestions.push(obj)
      }
      else{
        setAllQuestions = myQuiz
        for(let i = 0; i < setAllQuestions.length; i++){
          if (obj.question == setAllQuestions[i].question){
             stat = true
          }
        }
        if(stat){
           swal({
            title: "Duplicate entry detected"
          });
        }
        else{
          setAllQuestions.push(obj);
        }
      }
    }
  localStorage.setItem("myQuiz", JSON.stringify(setAllQuestions))
  RefetchQuiz()
}
function editAction(ind){
  let editformInputName = document.getElementById("editformInputName")
      xy = ind
      let objective = ""
      
      var edit_Question = JSON.parse(localStorage.getItem('myQuiz'));
      
      for(let i = 0; i < edit_Question.length; i++){
       
          if(edit_Question[i].id == ind){
            objective = edit_Question[i]
          }
      }
      setModalQuestion.value = objective.question;
      editOptionSelect.value = objective.opt.length;
      console.log(objective.opt.length);
      myEditModalOptionSelect(objective.opt)
      
  }
  function updateButton(){
          let question_options = document.querySelector(".question_options");

          let updateEdit = JSON.parse(localStorage.getItem('myQuiz'));
          
          if (setModalQuestion.value == ""){
              swal("Cannot set empty question")
          }
          else{
            let updateCheck = 0
              for(let i = 0; i < updateEdit.length; i++){
                  if(updateEdit[i].id == xy){
                    updateEdit[i].question = setModalQuestion.value;
                    
                  }
              }
          }
          localStorage.setItem("myQuiz", JSON.stringify(updateEdit));
          RefetchQuiz()

      }

      function deleteAction(a){
          // alert(a);
          swal({
              title: "Are you sure?",
              text: 'Quiz will be deleted from cart!',
              icon: "warning",
              buttons: true,
              dangerMode: true
         } )
          .then ((willDelete) => {
           if (willDelete) {

                  var deleteQuiz = JSON.parse(localStorage.getItem('myQuiz'));

                  if(deleteQuiz){
                      deleteQuiz.splice(a, 1)
                      localStorage.setItem('myQuiz', JSON.stringify(deleteQuiz))
                  }
                  RefetchQuiz()
                  swal("Quiz Deleted!", {
                      icon: "success",
                  });
          
              }
              else {
                RefetchQuiz()
                  swal("Quiz still in cart!")
              }
          });
      }
      
      
    
  
    
  
  

      // const clock = document.getElementById("clock");
      // const tick = () =>{
      //     const time = new Date()
      //     const h = time.getHours();
      //     const m = time.getMinutes();
      //     const s = time.getSeconds();

      //     const myTime =
      //     `<span>${time}</span>`
      //     clock.innerHTML = myTime
      // }
      // setInterval(tick, 1000)

      var adminName = document.getElementById("adminName")
      let auth = JSON.parse(localStorage.getItem("authUser"))
     if(auth){
      adminName.innerHTML = auth.name 
     }
     else{
         window.location.assign("signuppage.html")
     }


</script>
<script>
  includeHTML()
</script>
</body>
</html>